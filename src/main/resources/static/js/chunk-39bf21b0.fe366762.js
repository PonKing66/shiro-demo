(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39bf21b0"],{4381:function(e,t,n){"use strict";n("6762"),n("2fdb");var r=n("4360");function i(e,t){var n=t.value,i=r["a"].getters&&r["a"].getters.roles;if(!(n&&n instanceof Array))throw new Error("need roles! Like v-permission=\"['admin','editor']\"");if(n.length>0){var o=n,a=i.some((function(e){return o.includes(e)}));a||e.parentNode&&e.parentNode.removeChild(e)}}var o={inserted:function(e,t){i(e,t)},update:function(e,t){i(e,t)}},a=function(e){e.directive("permission",o)};window.Vue&&(window["permission"]=o,Vue.use(a)),o.install=a;t["a"]=o},b9e5:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["permission:add"],expression:"['permission:add']"}],attrs:{type:"primary"},on:{click:e.handleAddMenu}},[e._v("添加菜单")]),e._v(" "),n("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.menuList,stripe:"",lazy:"","row-key":"id","tree-props":e.treeProps}},[n("el-table-column",{attrs:{prop:"name",label:"名称",sortable:"",width:"200"}}),e._v(" "),n("el-table-column",{attrs:{prop:"path",label:"访问路径",width:"200"}}),e._v(" "),n("el-table-column",{attrs:{prop:"component",label:"组件路径",width:"200"}}),e._v(" "),n("el-table-column",{attrs:{prop:"permissionValue",label:"权限值",width:"200"}}),e._v(" "),n("el-table-column",{attrs:{prop:"icon",label:"图标",width:"150"}}),e._v(" "),n("el-table-column",{attrs:{prop:"type",label:"类型",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.type?n("el-tag",{attrs:{type:"danger"}},[e._v("菜单")]):e._e(),e._v(" "),2===t.row.type?n("el-tag",{attrs:{type:"success"}},[e._v("按钮")]):e._e()]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"status",label:"状态",width:"150"}}),e._v(" "),n("el-table-column",{directives:[{name:"permission",rawName:"v-permission",value:["permission:update","permission:remove"],expression:"['permission:update','permission:remove']"}],attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["permission:update"],expression:"['permission:update']"}],attrs:{type:"primary",size:"small"},on:{click:function(n){return e.handleEdit(t.row.id)}}},[e._v("编辑")]),e._v(" "),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["permission:remove"],expression:"['permission:remove']"}],attrs:{type:"danger",size:"small"},on:{click:function(n){return e.handleDelete(t)}}},[e._v("删除")])]}}])})],1),e._v(" "),n("el-dialog",{attrs:{title:"添加菜单",visible:e.addMenuFormVisible},on:{"update:visible":function(t){e.addMenuFormVisible=t}}},[n("el-form",{attrs:{model:e.menuForm}},[n("el-form-item",{attrs:{label:"类型","label-width":e.formLabelWidth}},[n("el-select",{attrs:{placeholder:"请选择区域"},model:{value:e.menuForm.type,callback:function(t){e.$set(e.menuForm,"type",t)},expression:"menuForm.type"}},e._l(e.typeSelectedList,(function(e,t){return n("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),e._v(" "),2==e.menuForm.type?n("el-form-item",{attrs:{label:"选择父菜单","label-width":e.formLabelWidth},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{attrs:{placeholder:"请选择区域"},model:{value:e.menuForm.pid,callback:function(t){e.$set(e.menuForm,"pid",t)},expression:"menuForm.pid"}},e._l(e.menuListSelections,(function(e,t){return n("el-option",{key:t,attrs:{label:e.name,value:e.id,type:"number"}})})),1)]}}],null,!1,1443540205)}):e._e(),e._v(" "),n("el-form-item",{attrs:{label:"名称","label-width":e.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.menuForm.name,callback:function(t){e.$set(e.menuForm,"name",t)},expression:"menuForm.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"访问路径","label-width":e.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.menuForm.path,callback:function(t){e.$set(e.menuForm,"path",t)},expression:"menuForm.path"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"权限值","label-width":e.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.menuForm.permissionValue,callback:function(t){e.$set(e.menuForm,"permissionValue",t)},expression:"menuForm.permissionValue"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"组件路径","label-width":e.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.menuForm.component,callback:function(t){e.$set(e.menuForm,"component",t)},expression:"menuForm.component"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"图标","label-width":e.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.menuForm.icon,callback:function(t){e.$set(e.menuForm,"icon",t)},expression:"menuForm.icon"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"状态","label-width":e.formLabelWidth}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:e.menuForm.status,callback:function(t){e.$set(e.menuForm,"status",t)},expression:"menuForm.status"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("div",{staticStyle:{"text-align":"right"}},[n("el-button",{attrs:{type:"danger"},on:{click:function(t){e.addMenuFormVisible=!1}}},[e._v("Cancel")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.confirmRole}},[e._v("Confirm")])],1)])],1)],1)},i=[],o=(n("96cf"),n("1da1")),a=n("b85c"),l=n("4381"),s=(n("e350"),n("b775")),u="/api/admin/permissions";function m(){return Object(s["a"])({url:"".concat(u),method:"get"})}function c(e){return Object(s["a"])({url:"".concat(u,"/")+e,method:"get"})}function d(e){return Object(s["a"])({url:"".concat(u),method:"post",data:e})}function p(e,t){return Object(s["a"])({url:"".concat(u,"/")+"".concat(e),method:"put",data:t})}function f(e){return Object(s["a"])({url:"".concat(u,"/")+e,method:"delete"})}var h={directives:{permission:l["a"]},data:function(){return{treeProps:{children:"children",hasChildren:"hasChildren"},menuList:null,menuListSelections:[],typeSelectedList:[{value:1,label:"菜单"},{value:2,label:"按钮"}],listLoading:!0,addMenuFormVisible:!1,formLabelWidth:"120px",dialogType:"new",menuForm:{}}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;this.listLoading=!0,m().then((function(t){e.menuList=t.data,e.listLoading=!1;var n,r=e.menuList[0],i=Object(a["a"])(r.children);try{for(i.s();!(n=i.n()).done;){var o=n.value;e.menuListSelections.push(o)}}catch(l){i.e(l)}finally{i.f()}}))},handleTest:function(e){console.log(e.row)},handleAddMenu:function(){this.dialogType="new",this.cleanData(),this.addMenuFormVisible=!0},handleEdit:function(e){var t=this;this.dialogType="edit",this.addMenuFormVisible=!0,c(e).then((function(e){t.menuForm=e.data}))},confirmRole:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t="edit"===this.dialogType,!t){e.next=6;break}return e.next=4,p(this.menuForm.id,this.menuForm);case 4:e.next=10;break;case 6:return e.next=8,d(this.menuForm);case 8:e.sent,this.fetchData();case 10:this.addMenuFormVisible=!1;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleDelete:function(e){var t=this,n=e.$index,r=e.row;this.$confirm("Confirm to remove the menu?","Warning",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,f(r.id);case 2:t.menuList.splice(n,1),t.$message({type:"success",message:"Delete scucced!"});case 4:case"end":return e.stop()}}),e)})))).catch((function(e){console.error(e)}))},cleanData:function(){this.menuForm={}}}},b=h,v=n("2877"),w=Object(v["a"])(b,r,i,!1,null,null,null);t["default"]=w.exports},e350:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n("6762"),n("2fdb");var r=n("4360");function i(e){if(e&&e instanceof Array&&e.length>0){var t=r["a"].getters&&r["a"].getters.roles,n=e,i=t.some((function(e){return n.includes(e)}));return!!i}return console.error("need roles! Like v-permission=\"['admin','editor']\""),!1}}}]);